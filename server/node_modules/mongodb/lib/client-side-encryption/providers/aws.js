"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
<<<<<<< HEAD
exports.loadAWSCredentials = loadAWSCredentials;
=======
exports.loadAWSCredentials = void 0;
>>>>>>> e07a47c3cd54194bc07a3957b66bc3e6538db22c
const aws_temporary_credentials_1 = require("../../cmap/auth/aws_temporary_credentials");
/**
 * @internal
 */
<<<<<<< HEAD
async function loadAWSCredentials(kmsProviders, provider) {
    const credentialProvider = new aws_temporary_credentials_1.AWSSDKCredentialProvider(provider);
=======
async function loadAWSCredentials(kmsProviders) {
    const credentialProvider = new aws_temporary_credentials_1.AWSSDKCredentialProvider();
>>>>>>> e07a47c3cd54194bc07a3957b66bc3e6538db22c
    // We shouldn't ever receive a response from the AWS SDK that doesn't have a `SecretAccessKey`
    // or `AccessKeyId`.  However, TS says these fields are optional.  We provide empty strings
    // and let libmongocrypt error if we're unable to fetch the required keys.
    const { SecretAccessKey = '', AccessKeyId = '', Token } = await credentialProvider.getCredentials();
    const aws = {
        secretAccessKey: SecretAccessKey,
        accessKeyId: AccessKeyId
    };
    // the AWS session token is only required for temporary credentials so only attach it to the
    // result if it's present in the response from the aws sdk
    Token != null && (aws.sessionToken = Token);
    return { ...kmsProviders, aws };
}
<<<<<<< HEAD
=======
exports.loadAWSCredentials = loadAWSCredentials;
>>>>>>> e07a47c3cd54194bc07a3957b66bc3e6538db22c
//# sourceMappingURL=aws.js.map